{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/groun/Desktop/Trabalho 5/clientes/livros-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Livro } from './livro';\nimport * as i0 from \"@angular/core\";\nconst baseURL = \"http://localhost:3030/livros\";\nclass ControleLivrosService {\n  obterLivros() {\n    return _asyncToGenerator(function* () {\n      const response = yield fetch(baseURL, {\n        method: 'GET'\n      });\n      const livrosMongo = yield response.json();\n      return livrosMongo.map(livroMongo => {\n        const livro = new Livro(livroMongo.codigo, livroMongo.codEditora, livroMongo.titulo, livroMongo.resumo, livroMongo.autores);\n        return livro;\n      });\n    })();\n  }\n  incluir(livro) {\n    return _asyncToGenerator(function* () {\n      const livroMongo = {\n        codigo: livro.codigo,\n        codEditora: livro.codEditora,\n        titulo: livro.titulo,\n        resumo: livro.resumo,\n        autores: livro.autores\n      };\n      const response = yield fetch(baseURL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(livroMongo)\n      });\n      const result = yield response.json();\n      return result.ok;\n    })();\n  }\n  excluir(codigo) {\n    return _asyncToGenerator(function* () {\n      const response = yield fetch(`${baseURL}/${codigo}`, {\n        method: 'DELETE'\n      });\n      const result = yield response.json();\n      return result.ok;\n    })();\n  }\n}\nControleLivrosService.ɵfac = function ControleLivrosService_Factory(t) {\n  return new (t || ControleLivrosService)();\n};\nControleLivrosService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ControleLivrosService,\n  factory: ControleLivrosService.ɵfac\n});\nexport { ControleLivrosService };","map":{"version":3,"names":["Livro","baseURL","ControleLivrosService","obterLivros","_asyncToGenerator","response","fetch","method","livrosMongo","json","map","livroMongo","livro","codigo","codEditora","titulo","resumo","autores","incluir","headers","body","JSON","stringify","result","ok","excluir","factory","ɵfac"],"sources":["C:\\Users\\groun\\Desktop\\Trabalho 5\\clientes\\livros-angular\\src\\app\\controle-livro.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Livro } from './livro';\n\nconst baseURL = \"http://localhost:3030/livros\";\n\ninterface LivroMongo {\n    codigo: string;\n    codEditora: number;\n    titulo: string;\n    resumo: string;\n    autores: string;\n}\n\n@Injectable()\nexport class ControleLivrosService {\n  async obterLivros(): Promise<Livro[]> {\n    const response = await fetch(baseURL, { method: 'GET' });\n    const livrosMongo: LivroMongo[] = await response.json();\n    return livrosMongo.map(livroMongo => {\n      const livro = new Livro(livroMongo.codigo, livroMongo.codEditora, livroMongo.titulo, livroMongo.resumo, livroMongo.autores);\n      return livro;\n    });\n  }\n\n  async incluir(livro: Livro): Promise<boolean> {\n    const livroMongo: LivroMongo = {\n      codigo: livro.codigo,\n      codEditora: livro.codEditora,\n      titulo: livro.titulo,\n      resumo: livro.resumo,\n      autores: livro.autores\n    };\n    const response = await fetch(baseURL, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(livroMongo)\n    });\n    const result = await response.json();\n    return result.ok;\n  }\n  \n  async excluir(codigo: string): Promise<boolean> {\n    const response = await fetch(`${baseURL}/${codigo}`, { method: 'DELETE' });\n    const result = await response.json();\n    return result.ok;\n  }\n}\n"],"mappings":";AACA,SAASA,KAAK,QAAQ,SAAS;;AAE/B,MAAMC,OAAO,GAAG,8BAA8B;AAU9C,MACaC,qBAAqB;EAC1BC,WAAWA,CAAA;IAAA,OAAAC,iBAAA;MACf,MAAMC,QAAQ,SAASC,KAAK,CAACL,OAAO,EAAE;QAAEM,MAAM,EAAE;MAAK,CAAE,CAAC;MACxD,MAAMC,WAAW,SAAuBH,QAAQ,CAACI,IAAI,EAAE;MACvD,OAAOD,WAAW,CAACE,GAAG,CAACC,UAAU,IAAG;QAClC,MAAMC,KAAK,GAAG,IAAIZ,KAAK,CAACW,UAAU,CAACE,MAAM,EAAEF,UAAU,CAACG,UAAU,EAAEH,UAAU,CAACI,MAAM,EAAEJ,UAAU,CAACK,MAAM,EAAEL,UAAU,CAACM,OAAO,CAAC;QAC3H,OAAOL,KAAK;MACd,CAAC,CAAC;IAAC;EACL;EAEMM,OAAOA,CAACN,KAAY;IAAA,OAAAR,iBAAA;MACxB,MAAMO,UAAU,GAAe;QAC7BE,MAAM,EAAED,KAAK,CAACC,MAAM;QACpBC,UAAU,EAAEF,KAAK,CAACE,UAAU;QAC5BC,MAAM,EAAEH,KAAK,CAACG,MAAM;QACpBC,MAAM,EAAEJ,KAAK,CAACI,MAAM;QACpBC,OAAO,EAAEL,KAAK,CAACK;OAChB;MACD,MAAMZ,QAAQ,SAASC,KAAK,CAACL,OAAO,EAAE;QACpCM,MAAM,EAAE,MAAM;QACdY,OAAO,EAAE;UAAE,cAAc,EAAE;QAAkB,CAAE;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACX,UAAU;OAChC,CAAC;MACF,MAAMY,MAAM,SAASlB,QAAQ,CAACI,IAAI,EAAE;MACpC,OAAOc,MAAM,CAACC,EAAE;IAAC;EACnB;EAEMC,OAAOA,CAACZ,MAAc;IAAA,OAAAT,iBAAA;MAC1B,MAAMC,QAAQ,SAASC,KAAK,CAAC,GAAGL,OAAO,IAAIY,MAAM,EAAE,EAAE;QAAEN,MAAM,EAAE;MAAQ,CAAE,CAAC;MAC1E,MAAMgB,MAAM,SAASlB,QAAQ,CAACI,IAAI,EAAE;MACpC,OAAOc,MAAM,CAACC,EAAE;IAAC;EACnB;;AA/BWtB,qBAAqB,C;mBAArBA,qBAAqB;AAAA;AAArBA,qBAAqB,C;SAArBA,qBAAqB;EAAAwB,OAAA,EAArBxB,qBAAqB,CAAAyB;AAAA;SAArBzB,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}